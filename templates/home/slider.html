{% load static %}
<section class="main-slider-wrapper">
    <div class="swiper main-slider position-relative">
        <div class="swiper-wrapper" id="mainSliderWrapper">
        </div>
        <div
            class="swiper-nav d-flex align-items-center justify-content-between gap-3 position-absolute end-0 start-0 mx-3 d-none d-lg-flex">
            <div class="slide-icon main-slider-icon-left"><span class="material-icons-outlined">chevron_left</span>
            </div>
            <div class="slide-icon main-slider-icon-right"><span class="material-icons-outlined">navigate_next</span>
            </div>
        </div>
    </div>
</section>
<script>
    document.addEventListener("DOMContentLoaded", async () => {
        const sliderWrapper = document.getElementById("mainSliderWrapper");
        try {
            const response = await fetch('{% url "api:main_slider_api" %}');
            const result = await response.json();

            console.log("Slider API Result: ", result);

            if (result.status && result.data.length > 0) {
                sliderWrapper.innerHTML = result.data
                .filter(slide => slide.is_active)
                .map(slide => `
                <div class="swiper-slide position-relative">
                    <div class="slider-content">
                        <div class="container px-4">
                            <div class="row align-items-center g-4">
                                <img src="${slide.image}" alt="${slide.title ?? 'Slider Image'}" class="img-fluid">
                            </div>
                        </div>
                    </div>
                </div>
                `)
                .join("");

            }
        } catch (error) {
            console.error("Error fetching slider data:", error);
        }
    });
</script>