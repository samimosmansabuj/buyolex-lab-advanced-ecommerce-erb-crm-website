{% load static %}
<div id="orderModal" class="modal">
    <div class="modal-content">
        <span class="close-btn" id="closeModal">&times;</span>

        <!-- HEADER -->
        <div class="modal-header">অর্ডার করতে নিচের ফর্মটি পূরণ করুন</div>

        <!-- BODY (Scroll) -->
        <div class="modal-body">
            <form method="post">
                <div class="field-group">
                    <label for="name">নাম</label>
                    <input type="text" id="name" name="name" required>
                </div>

                <div class="field-group">
                    <label for="phone">মোবাইল নম্বর</label>
                    <input type="tel" id="phone" name="phone" required>
                </div>

                <div style="display: flex; align-items: center; gap: 6px; margin-bottom: 15px; margin-top: 3px;">
                    <input type="checkbox" name="have_email" id="have_email" style="margin: 0; width: 5%; transform: scale(2);">
                    <label for="have_email" style="margin: 0; cursor: pointer; font-size: 17px;">Have you any email?</label>
                </div>

                <div class="field-group" id="email_group" style="display: none;">
                    <label for="email">ইমেইল নম্বর</label>
                    <input type="email" id="email" name="email">
                </div>

                <div class="field-group">
                    <label for="address">ঠিকানা</label>
                    <textarea id="address" name="address" required></textarea>
                </div>

                <div class="field-group">
                    <label for="location">আপনি কোথায় আছেন?</label>
                    <select id="location" name="location" required>
                        <option value="">-- সিলেক্ট করুন --</option>
                    </select>
                </div>

                <div class="field-group">
                    <label for="color">কালার সিলেক্ট করুন</label>
                    <select id="color" name="color" required>
                        <option value="">-- সিলেক্ট করুন --</option>
                        {% for variante in landing_page_product.product.variants.all %}
                        <option value="{{variante.sku}}">{{variante.sku}}</option>
                        {% endfor %}
                    </select>
                </div>

                <div class="field-group qty-group">
                    <label for="qty">পরিমাণ (Qty)</label>
                    <div class="qty-input-wrapper">
                        <button type="button" class="qty-btn minus">−</button>
                        <input type="number" id="qty" name="qty" min="1" value="1" required>
                        <button type="button" class="qty-btn plus">+</button>
                    </div>
                </div>

                <div class="field-group">
                    <label for="notes">নোট (ঐচ্ছিক)</label>
                    <textarea id="notes" name="notes"></textarea>
                </div>

                <button type="submit" class="cta-btn">অর্ডার কনফার্ম করুন</button>
            </form>
        </div>

        <!-- FOOTER -->
        <div class="modal-footer" id="totalDisplay">
            মোট মূল্য: ৳{{landing_page_product.product.price}}
        </div>
    </div>
</div>



<script>
    const checkbox = document.getElementById('have_email');
    const emailField = document.getElementById('email_group');

    checkbox.addEventListener('change', function () {
        emailField.style.display = this.checked ? "block" : "none";
    });




    const select = document.getElementById('location')
    fetch('https://bdapi.vercel.app/api/v.1/district')
    .then(response => response.json())
    .then(data =>{
        if(data.status === 200 && data.success){
            data.data.forEach(district => {
                const option = document.createElement('option')
                option.value = district.name.toLowerCase()
                option.textContent = district.bn_name
                select.appendChild(option)
                // if(district.name.toLowerCase() !== "dhaka"){

                // }
            });
        }
    })
    .catch(error => console.error('Error fetching divisions:', error))
</script>